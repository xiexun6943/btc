<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

    <!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="/Public/Static/css/base.css?v=2" />
    <link rel="stylesheet" type="text/css" href="/Public/Static/css/nologed.css" />
    <title>{$webname}</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&amp;subset=latin-ext" rel="stylesheet">
    <link rel="stylesheet" href="/Public/Dela/demo/demo.css">
    <link rel="stylesheet" href="/Public/Dela/template/dela-template.css?v=<?=time()?>">
<!--    <link rel="stylesheet" href="/Public/btn/style.css">-->
    <link rel="stylesheet" href="/Public/build/css/countrySelect.css">
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

        <style>
        .header_box {
            background: #fffeee;
            position: fixed;
        }
        .txtl {
            text-align: left;
        }
        .no_headers{
            width: 100%;
            height: 50px;
            z-index: 999;
        }
        .lang-svg {
            padding: 10px 20px 0px 0px;
        }
        button {
            appearance: auto;
            writing-mode: horizontal-tb !important;
            font-style: ;
            font-variant-ligatures: ;
            font-variant-caps: ;
            font-variant-numeric: ;
            font-variant-east-asian: ;
            font-weight: ;
            font-stretch: ;
            font-size: ;
            font-family: ;
            text-rendering: auto;
            color: buttontext;
            letter-spacing: normal;
            word-spacing: normal;
            line-height: normal;
            text-transform: none;
            text-indent: 0px;
            text-shadow: none;
            display: inline-block;
            text-align: center;
            align-items: flex-start;
            cursor: default;
            box-sizing: border-box;
            background-color: buttonface;
            margin: 0em;
            padding: 1px 6px;
            border-width: 2px;
            border-style: outset;
            border-color: buttonborder;
            border-image: initial;
        }
        .btn-hover {
            width: 100%;
            font-size: 16px;
            font-weight: 600;
            color: #fff;
            cursor: pointer;
            height: 30px;
            text-align: center;
            border: none;
            background-size: 300% 100%;
            border-radius: 50px;
            moz-transition: all .4s ease-in-out;
            -o-transition: all .4s ease-in-out;
            -webkit-transition: all .4s ease-in-out;
            transition: all .4s ease-in-out;
        }
        .btn-hover.color-1 {
            background-image: linear-gradient(to right, #25aae1, #40e495, #30dd8a, #2bb673);
            box-shadow: 0 4px 15px 0 rgb(49 196 190 / 75%);
        }
        .btn-hover.color-6 {
            background-image: linear-gradient(to right, #009245, #FCEE21, #00A8C5, #D9E021);
            box-shadow: 0 4px 15px 0 rgb(83 176 57 / 75%);
        }
        .btnl {
            float: left;
            margin-bottom:1.1em;
        }
        .btnr {
            float: right;
            margin-bottom:1.1em;
        }
        .code {
            width: 100% !important;
        }
        .send-btn {
            width: 20%;
            height: 1.8em;
            position: absolute;
            top: 480px;
            left: 220px;

        }
        .mobile_input {
            width: 70% !important;
            float: right;
        }

        .btn-hover.color-4 {
            background-image: linear-gradient(to right, #fc6076, #ff9a44, #ef9d43, #e75516);
            box-shadow: 0 4px 15px 0 rgb(252 104 110 / 75%);
        }
        .main_demo {
            width: 28% !important;
            float: left;
        }

        .dela-presets-container-2 .dela-preset-2-2 {
            position: relative;
            font-size: 16px;
            width: 14.4em;
            min-width: 11em;
            padding: 5.6em 3.68em 6.1em 3.68em;
            box-shadow: 0 0 1em rgb(0 0 0 / 20%);
            font-family: Roboto;
            /*background: linear-gradient(to top, #0052fe 0, #40cded 100%);*/
            background: #d3fff9;
        }


    </style>
</head>
<!--<body autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus">-->
<body>

<div class="no_headers header_box" >
    <div class="fl bhalf allhg txtl" style="line-height:50px;">
        <i class="bi bi-x fw"  onclick="goindex()" style="font-size:36px;color: #000"></i>
    </div>
    
    <a href="{:U('Login/setlang')}">
        <div class="fr bhalf allhg txtr" style="line-height:50px;position:relative;top:10px;right:10px">
    	    <div class="headerbox fr txtr"></div>
        </div>
	</a>
    
    
		
		<style>
		    .txtr > img{
		        width:30px;
		        height: auto;
		    }
		</style>
		<script>
		    function getCookie(cookieName) {
              const name = cookieName + "=";
              const decodedCookie = decodeURIComponent(document.cookie);
              const cookieArray = decodedCookie.split(';');
            
              for(let i = 0; i < cookieArray.length; i++) {
                let cookie = cookieArray[i];
                while (cookie.charAt(0) === ' ') {
                  cookie = cookie.substring(1);
                }
                if (cookie.indexOf(name) === 0) {
                  return cookie.substring(name.length, cookie.length);
                }
              }
            
              return "";
            }
            
            const language = getCookie("think_language");
            console.log(language);
            
            if(language=='zh-tw'){
                $('.txtr').html('<img src="/Public/Static/img/flag/tw.png?v=2" class="flag">')
            }else if(language=='zh-cn'){
                $('.txtr').html('<img src="/Public/Static/img/flag/cn.png" class="flag">')
            }else if(language=='en-us'){
                $('.txtr').html('<img src="/Public/Static/img/flag/en.png" class="flag">')
            }else if(language=='ja-jp'){
                $('.txtr').html('<img src="/Public/Static/img/flag/jp.png" class="flag">')
            }else if(language=='ko-kr'){
                $('.txtr').html('<img src="/Public/Static/img/flag/kr.png" class="flag">')
            }else{
                $('.txtr').html('<img src="/Public/Static/img/flag/tw.png?v=2" class="flag">')
            }

		</script>
</div>
<div id="page-container">
    <div class="all-dela-presets-container"  >
        <!-- Preset Begin-->
        <div class="dela-presets-container-2" style="padding: 0px;background:#fffeee">
            <div class="dela-preset-container">
                <form class="dela-preset-2-2" onclick="return false" method="get">
                    
                <div data-bn-type="text" class="css-152kxht f16" style="text-align:center;line-height: 80px">
                	<img src="/Upload/public/{:get_config('waplogo')}?v=<?=time()?>" class="css-1jgk2rg" style="position:relative;top:15px;display:inline-block;height:50px;width:50px" />
                	<span style="display:inline-block;font-weight:bold;font-size:24px;color:#ffc336" class="fbaseblue">{:L('BTCUSDT')}</span>
                </div>
                    
                    <p class="dela-form__title" style="font-size:1.3em">{:L('注册')}</p>
                    
                    
                    
                    <style>
                        .btn_bar{
                            float: left;
                            width:45%;
                            font-size: .2rem;
                        }
                        .gray{
                            background-image: linear-gradient(to right, #e9e9e9, #e9e9e9, #e9e9e9, #e9e9e9)!important;color:black
                        }
                    </style>
                    
            <script>
                $(function(){
                    var cookies = document.cookie ? document.cookie.split('; ') : [];
                    var lang = []
                    cookies.forEach(function(ele){
                        if(ele.indexOf('think_language')>=0){
                            lang = ele.split('=')
                        }
                    })
                    console.log(lang[1])
                    if(lang.length>0){
                     if(lang[1]=='ja-jp'){
                         $('#area_code').val('+81')
                     }
                     if(lang[1]=='zh-cn'){
                         $('#area_code').val('+852')
                     }   
                    }
                })
            </script>
            
                    <script>
                        $(function(){
                            $('.btn_bar').click(function(){
                                $('.btn_bar').addClass('gray')
                                $(this).removeClass('gray')
                                var index = $(this).index($('.btn_bar'))
                                $('.reg_kind').hide()
                                $('.reg_kind').eq(index).show()
                            })
                        })
                    </script>
                    
                    <!--<button class="btn_bar btn-hover color-6 btnr" style="margin-right:1.5rem;font-size:.8rem">{:L('邮箱')}</button>-->
                    <!--<button class="btn_bar btn-hover color-6 btnr gray" style="font-size:.8rem">{:L('手机')}</button>-->
                  
                    <span class="reg_kind">
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="hidden" name="type" id="type" value="2">
                        <!--<input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="hidden" name="account" id="account" >-->
                        <!--<input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="email" name="email" id="email" placeholder="{:L('邮箱')}" required="" autocomplete="email" >
                        <div id="main_demo" style="margin-bottom:1.1em;display:none" >
                            <div class="container">
                                <div class="form-item">
                                    <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" id="country_selector" type="text">
                                    <label for="country_selector" style="display:none;">Select a country here...</label>
                                </div>
                                <button type="submit" style="display:none;">Submit</button>
                            </div>
                        </div>-->
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="text" name="account" id="account" placeholder="{:L('请输入账号')}" required autocomplete="account">
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="password" name="password" id="lpwd" placeholder="{:L('请输入密码')}" required="">
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="text" name="invite" id="invit"  placeholder="{:L('邀请码')}" required="" value="{$qrcode}">
                        <!--<input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="password" name="repeat" placeholder="{:L('确认密码')}" oninput="this.setCustomValidity(this.value != document.getElementById('pass-'+2).value ? 'Passwords are not the same.' : '')" required="">
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="text" name="invite" id="invit"  placeholder="{:L('邀请码')}" required="" value="{$qrcode}">
                        <div>
                            <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="text" id="ecode" name="code" placeholder="{:L('验证码')}"  class="code"  required=""  value="">
                            <button  class="btn-hover color-4 send-btn" onclick="getCode()"> {:L('发送')} </button>
                        </div>-->
                        
                        
                <div class="input">
                    <input onpaste="return false" oncontextmenu="return false" oncopy="return false" oncut="return false" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="text" class="input-field"  name="vcode" id="vcode" value="" required style="width: 50%;display:inline-block"  placeholder="{:L('验证码')}"/>
                    <div class="action-button login-send-button" style="display:inline-block;width:45%;position:relative;top:15px">
                        <img style="width:100%;height:40px;border-radius:5px;" src="{:U('Verify/code')}" onclick="this.src=this.src+'?t='+Math.random()" title="{:L('换一张')}">
                    </div>
                </div>
                        
                        
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="submit" name="submit"  onclick="upreg()" value="{:L('注册')}">
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="submit" name="submit" onclick="uplogin()" value="{:L('登录')}">
                    </span>
                  
                    <!--<span class="reg_kind" style="display:none">
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="hidden" name="type" id="type" value="2">
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="hidden" name="account" id="account" >
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="area_code" name="area_code" id="area_code" placeholder="{:L('区号')}" required="" autocomplete="area_code" oninput="value=value.replace(/^0|[^0-9]/g,'')">
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="phone" name="phone" id="phone" placeholder="{:L('手机号')}" required="" autocomplete="phone" oninput="value=value.replace(/^0|[^0-9]/g,'')">
                        <div id="main_demo" style="margin-bottom:1.1em;display:none" >
                            <div class="container">
                                <div class="form-item">
                                    <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" id="country_selector" type="text">
                                    <label for="country_selector" style="display:none;">Select a country here...</label>
                                </div>
                                <button type="submit" style="display:none;">Submit</button>
                            </div>
                        </div>
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="password" name="password" id="pwd_phone" placeholder="{:L('密码')}" required="">
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="password" name="repeat" placeholder="{:L('确认密码')}" oninput="this.setCustomValidity(this.value != document.getElementById('pass-'+2).value ? 'Passwords are not the same.' : '')" required="">
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="text" name="invite" id="invitation_code"  placeholder="{:L('邀请码')}" required="" value="{$qrcode}">
                        <div>
                            <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="text" id="sms_code" name="code" placeholder="{:L('验证码')}"  class="code"  required=""  value="">
                            <button  class="btn-hover color-4 send-btn" onclick="getPhoneCode()" style="top: 540px;"> {:L('发送')} </button>
                        </div>
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="submit" name="submit"  onclick="upreg2()" value="{:L('注册')}">
                        <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus="autofocus" type="submit" name="submit" onclick="uplogin()" value="{:L('登录')}">
                    </span>-->

                </form>
            </div>
        </div>

    </div>
</div>

<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="/Public/Static/js/layer/layer.js" ></script>
<script type="text/javascript">
    function upreg(){
        var  type = $('#type').val();
        if (type != 1 && type != 2) {
            layer.msg("{:L('请选择注册类型')}");return false;
        }
        // console.log(account);
        // return false;
        // var email = $("#email").val();
        var reg = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
        /*if(email=='' || email == null){
            layer.msg("{:L('请输入邮箱')}");return false;
        }
        if(!reg.test(email)){
            layer.msg("{:L('邮箱格式不正确')}");return false;
        }
        var ecode = $("#ecode").val();
        if(ecode == ''){
            layer.msg("{:L('请输入邮箱验证码')}");return false;
        }*/
        var account = $("#account").val();
        
        var accountCheck = $("#account").val().toUpperCase();
        
        if(accountCheck.includes('SELECT')||accountCheck.includes('INSERT')||accountCheck.includes('UPDATE')||accountCheck.includes('DELETE')||accountCheck.includes('DROP')||accountCheck.includes('INTO')||accountCheck.includes('UNION')){
            layer.msg("{:L('用户名已存在')}");return false;
        }
        if(account=='' || account == null){
            layer.msg("{:L('请输入账号')}");return false;
        }
        var lpwd = $("#lpwd").val();
        if(lpwd == ''){
            layer.msg("{:L('请输入密码')}");return false;
        }
        var invit = $("#invit").val();
        if( invit == ''){
            layer.msg("{:L('请输入邀请码')}");return false;
        }
        var vcode = $("#vcode").val();
        if(vcode == ''){
            layer.msg("{:L('请输入图形验证码')}");return false;
        }
      
        $.post("{:U('Login/upregister')}",
            // {'email' : email, 'ecode' : ecode, 'lpwd' : lpwd, 'invit' : invit},
                        {'account' : account,  'lpwd' : lpwd, 'invit' : invit, 'vcode' : vcode},
            function(data){
                if(data.code == 1){
                    layer.msg(data.info);
                    setTimeout(function(){
                        window.location.href="{:U('Login/index')}";
                    },2000);
                }else{
                    layer.msg(data.info);return false;
                }
            }
        );
    }
    
    
    function upreg2(){
        var  type = $('#type').val();
        if (type != 1 && type != 2) {
            layer.msg("{:L('请选择注册类型')}");return false;
        }
        var account = $("#phone").val();
        // console.log(account);
        // return false;
        var area_code = $("#area_code").val();
        var phone = $("#phone").val();
        // var reg = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
        if(area_code=='' || area_code == null){
            layer.msg("{:L('请输入区号')}");return false;
        }
        if(phone=='' || phone == null){
            layer.msg("{:L('请输入手机号')}");return false;
        }
        /*if(!reg.test(phone)){
            layer.msg("{:L('手机号格式不正确')}");return false;
        }*/
        var sms_code = $("#sms_code").val();
        if(sms_code == ''){
            layer.msg("{:L('请输入手机验证码')}");return false;
        }
        var pwd = $("#pwd_phone").val();
        
        if(lpwd == ''){
            layer.msg("{:L('请输入密码')}");return false;
        }
        var invitation_code = $("#invitation_code").val();
        if( invitation_code == ''){
            layer.msg("{:L('请输入邀请码')}");return false;
        }
      
        $.post("{:U('Login/smsregister')}",
            {'area_code' : area_code,'phone' : phone, 'sms_code' : sms_code, 'pwd' : pwd, 'invitation_code' : invitation_code},
            function(data){
                if(data.code == 1){
                    layer.msg(data.info);
                    setTimeout(function(){
                        window.location.href="{:U('Login/index')}";
                    },2000);
                }else{
                    layer.msg(data.info);return false;
                }
            }
        );


    }
    
    
        //获取验证码
    function getCode(){
        var  type = $('#type').val();
        if (type != 1 && type != 2) {
            layer.msg("{:L('请选择注册类型')}");return false;
        }
        
        
        if(type == 1){
            //获取手机验证码
            var account = $("#country_selector").val();
            var phone = account.split(' ')[1]
            console.log(phone)
            if(phone==''){
                layer.msg("{:L('请输入手机号')}");return false;
            }
            $.post("{:U('Login/sendpcode')}",
                    {'email' : account},
                    function(data){
                        if(data.code == 1){
                            layer.msg(data.info);
                            
                        }else{
                            layer.msg(data.info);return false;
                        }
                    }
                );
            
        }
        
        
        if(type == 2){
            //获取邮箱验证码
            var account = $("#email").val();
            // console.log(account)
            var email = $("#email").val();
            var reg = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
            if(email=='' || email == null){
                layer.msg("{:L('请输入邮箱')}");return false;
            }
            if(!reg.test(email)){
                layer.msg("{:L('邮箱格式不正确')}");return false;
            }
            
             $.post("{:U('Login/sendcode')}",
                {'email' : email},
                function(data){
                    if(data.code == 1){
                        layer.msg(data.info);
                        
                    }else{
                        layer.msg(data.info);return false;
                    }
                }
            );
        }
        
    }
        //获取验证码
    function getPhoneCode(){
        
        
            //获取手机验证码
            var area_code = $('#area_code').val()
            var phone = $('#phone').val()
            console.log(phone)
            if(area_code=='' || area_code == null){
                layer.msg("{:L('请输入区号')}");return false;
            }
            if(phone=='' || phone == null){
                layer.msg("{:L('请输入手机号')}");return false;
            }
            $.post("{:U('Login/sendSmsCode')}",
                    {'phone' : phone,'area_code':area_code},
                    function(data){
                        if(data.code == 1){
                            layer.msg(data.info);
                            
                        }else{
                            layer.msg(data.info);return false;
                        }
                    }
                );
            
        
        
        
        
    }
</script>


<script type="text/javascript">
    
    function stype(type) {
        if (type == 2) {
            $('#email').show();
            $('#main_demo').hide();
        }
        if (type == 1) {
            $('#email').hide();
            $('#main_demo').show();
        }
        $('#type').val(type);

    }
    
    function goindex(){
        window.location.href="{:U('Index/index')}";
    }

    function uplogin(){
        window.location.href="{:U('Login/index')}";
    }

    function forgot_password() {
        window.location.href="{:U('Login/findpwd')}";
    }


</script>
<script src="/Public/build/js/jquery-1.9.1.min.js"></script>
<script src="/Public/build/js/countrySelect.js"></script>
<script>
    $("#country_selector").countrySelect({
        preferredCountries: ["jp","us"]
        // preferredCountries: ["us","jp","kr","vn"]
    });
</script>

</body>
</html>
